<!-- LED States -->
</br>
</br>
</br>

<div class="container">
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">LED States</h5>

          <div class="row">
            <div class="col-12">
              <p class="right">LED States represent a possible state of a single LED. It has 3 values (Red, Green, Blue), an intensity (percentage),
                and a power state.</p>
            </div>
          </div>

          <table class="table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Red</th>
                <th>Green</th>
                <th>Blue</th>
                <th>Intensity</th>
                <th>On/Off</th>
                <th></th>
                <th></th>
              </tr>
            </thead>
            <tbody id="editor_rows">
              {{#each LEDStates}}
              <!-- Display or update row -->
              <tr>
                <!-- ID -->
                <td>{{ id }}</td>

                <form name="patch_ledState" action="/ledStates" method="POST">
                  <input type="number" name="id" value="{{ id }}" hidden> <!-- Hidden element for ID -->
                  
                  <!-- Red -->
                  <td class="row_display_{{id}}">{{ r }}</td>
                  <td class="row_update_{{id}} hidden">
                    <input type="number" class="form-control" style="width:80px;" name="red" value="{{ r }}" min="0" max="255">
                  </td>
                  <!-- Green -->
                  <td class="row_display_{{id}}">{{ g }}</td>
                  <td class="row_update_{{id}} hidden">
                    <input type="number" class="form-control" style="width:80px;" name="green" value="{{ g }}" min="0" max="255">
                  </td>
                  <!-- Blue -->
                  <td class="row_display_{{id}}">{{ b }}</td>
                  <td class="row_update_{{id}} hidden">
                    <input type="number" class="form-control" style="width:80px;" name="blue" value="{{ b }}" min="0" max="255">
                  </td>
                  <!-- Intensity -->
                  <td class="row_display_{{id}}" style="width:80px;">{{ intensity }}</td>
                  <td class="row_update_{{id}} hidden">
                    <input type="number" class="form-control" style="width:80px;" name="intensity" value="{{ intensity }}" min="0" max="100">
                  </td>
                  <!-- Power -->
                  <td class="row_display_{{id}}">{{ power }}</td>
                  <td class="row_update_{{id}} hidden">
                    <input type="checkbox" class="form-check-input mx-auto" name="power" {{#if power}}checked{{/if}}>
                  </td>

                  <!-- Save -->
                  <td class="row_update_{{id}} hidden">
                    <button type="submit" id="row_save_{{id}}" class="btn text-white badge badge-info" onclick="edit_mode({{id}})">Save</button>
                  </td>
                </form>

                <!-- Edit -->
                <td>
                  <a id="row_edit_{{id}}" class="btn text-white badge badge-success" onclick="edit_mode({{id}})">Edit</a>
                </td>

                <!-- Delete -->
                <form name="delete_ledState" action="/ledStates" method="DELETE">
                  <td class="row_display_{{id}}">
                    <button type="submit" - id="row_delete_{{id}}" class="btn text-white badge badge-danger">Delete</button>
                  </td>
                </form>

              </tr>
              {{/each}}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  function edit_mode(id) {
    if ($('.row_update_' + id).hasClass("hidden")) {
      $('.row_update_' + id).removeClass("hidden");
      $('.row_display_' + id).addClass("hidden");
      // Edit button to cancel
      $('#row_edit_' + id).text("Cancel");
      $('#row_edit_' + id).removeClass("badge-success");
      $('#row_edit_' + id).addClass("badge-secondary");
    } else {
      $('.row_update_' + id).addClass("hidden");
      $('.row_display_' + id).removeClass("hidden");
      // Edit button to edit
      $('#row_edit_' + id).text("Edit");
      $('#row_edit_' + id).removeClass("badge-secondary");
      $('#row_edit_' + id).addClass("badge-success");
    }
  }
</script>